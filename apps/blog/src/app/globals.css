@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Use class-based dark mode for next-themes compatibility */
@custom-variant dark (&:where(.dark, .dark *, .tokyonight, .tokyonight *));
@custom-variant nord-light (&:where(.nord-light, .nord-light *));

/* Theme configuration for v4 */
@theme inline {
  /* Border radius */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* Font families - use inline to allow runtime CSS variables from Next.js font */
  --font-sans:
    var(--font-biz-ud-gothic), "BIZ UDGothic", -apple-system,
    BlinkMacSystemFont, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;

  /* Colors */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));
}

/* CSS Variables for light/dark mode */
:root {
  --background: 0 0% 100%;
  --foreground: 0 0% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 0 0% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 0 0% 3.9%;
  --primary: 0 0% 9%;
  --primary-foreground: 0 0% 98%;
  --secondary: 0 0% 96.1%;
  --secondary-foreground: 0 0% 9%;
  --muted: 0 0% 96.1%;
  --muted-foreground: 0 0% 45.1%;
  --accent: 0 0% 96.1%;
  --accent-foreground: 0 0% 9%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 0 0% 89.8%;
  --input: 0 0% 89.8%;
  --ring: 0 0% 3.9%;
  --chart-1: 12 76% 61%;
  --chart-2: 173 58% 39%;
  --chart-3: 197 37% 24%;
  --chart-4: 43 74% 66%;
  --chart-5: 27 87% 67%;
  --radius: 0.5rem;
}

.dark {
  --background: 0 0% 3.9%;
  --foreground: 0 0% 98%;
  --card: 0 0% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 0 0% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 0 0% 9%;
  --secondary: 0 0% 14.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 0 0% 14.9%;
  --muted-foreground: 0 0% 63.9%;
  --accent: 0 0% 14.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --border: 0 0% 14.9%;
  --input: 0 0% 14.9%;
  --ring: 0 0% 83.1%;
  --chart-1: 220 70% 50%;
  --chart-2: 160 60% 45%;
  --chart-3: 30 80% 55%;
  --chart-4: 280 65% 60%;
  --chart-5: 340 75% 55%;
}

.tokyonight {
  --background: 235 18.8% 12.5%; /* #1a1b26 */
  --foreground: 228.7 72.6% 85.7%; /* #c0caf5 */
  --card: 235 18.8% 12.5%;
  --card-foreground: 228.7 72.6% 85.7%;
  --popover: 235 18.8% 12.5%;
  --popover-foreground: 228.7 72.6% 85.7%;
  --primary: 220.8 88.7% 72.4%; /* #7aa2f7 Blue */
  --primary-foreground: 235 18.8% 12.5%;
  --secondary: 224.7 37% 24.9%; /* #283457 Selection */
  --secondary-foreground: 228.7 72.6% 85.7%;
  --muted: 224.7 37% 24.9%;
  --muted-foreground: 228.6 30% 60%; /* #7982a9 Brighter comment */
  --accent: 261.3 85.3% 78.6%; /* #bb9af7 Magenta */
  --accent-foreground: 235 18.8% 12.5%;
  --destructive: 348.8 89% 71.6%; /* #f7768e Red */
  --destructive-foreground: 235 18.8% 12.5%;
  --border: 224.7 37% 24.9%;
  --input: 224.7 37% 24.9%;
  --ring: 220.8 88.7% 72.4%;
  --chart-1: 220.8 88.7% 72.4%; /* Blue */
  --chart-2: 202.2 100% 74.5%; /* #7dcfff Cyan */
  --chart-3: 88.8 50.5% 61.2%; /* #9ece6a Green */
  --chart-4: 261.5 54.1% 66.7%; /* #9d7cd8 Purple */
  --chart-5: 35.5 65.9% 64.3%; /* #e0af68 Yellow */
}

.nord-light {
  /* Nord Light Theme - Snow Storm background with Polar Night text */
  --background: 218 27% 94%; /* #ECEFF4 nord6 */
  --foreground: 220 16% 22%; /* #2E3440 nord0 */
  --card: 218 27% 94%; /* #ECEFF4 nord6 */
  --card-foreground: 220 16% 22%; /* #2E3440 nord0 */
  --popover: 219 28% 88%; /* #D8DEE9 nord4 */
  --popover-foreground: 220 16% 22%; /* #2E3440 nord0 */
  --primary: 213 32% 52%; /* #5E81AC nord10 Blue */
  --primary-foreground: 218 27% 94%; /* #ECEFF4 nord6 */
  --secondary: 218 27% 92%; /* #E5E9F0 nord5 */
  --secondary-foreground: 220 16% 22%; /* #2E3440 nord0 */
  --muted: 218 27% 92%; /* #E5E9F0 nord5 */
  --muted-foreground: 220 17% 36%; /* #4C566A nord3 */
  --accent: 193 43% 67%; /* #88C0D0 nord8 Cyan */
  --accent-foreground: 220 16% 22%; /* #2E3440 nord0 */
  --destructive: 354 42% 56%; /* #BF616A nord11 Red */
  --destructive-foreground: 218 27% 94%; /* #ECEFF4 nord6 */
  --border: 219 28% 88%; /* #D8DEE9 nord4 */
  --input: 219 28% 88%; /* #D8DEE9 nord4 */
  --ring: 213 32% 52%; /* #5E81AC nord10 */
  --chart-1: 213 32% 52%; /* #5E81AC nord10 Blue */
  --chart-2: 193 43% 67%; /* #88C0D0 nord8 Cyan */
  --chart-3: 92 28% 65%; /* #A3BE8C nord14 Green */
  --chart-4: 311 20% 63%; /* #B48EAD nord15 Purple */
  --chart-5: 40 71% 73%; /* #EBCB8B nord13 Yellow */
}

/* Base styles */
* {
  border-color: var(--color-border);
}

body {
  background-color: var(--color-background);
  color: var(--color-foreground);
}

/* Override prose */
.prose pre {
  background-color: #0c0c0c9b;
  border-radius: 0.5rem !important;
}

/* Override prose styles for code blocks - must be outside @layer to override Tailwind prose */
.prose .shiki-wrapper pre,
.prose pre.shiki {
  margin: 0 !important;
  padding: 1rem !important;
}

/* Remove prose margins from code block wrapper */
.prose .group.relative.my-4 {
  margin-top: -0.6rem !important;
  margin-bottom: -0.65rem !important;
  margin-left: -0.85rem !important;
  margin-right: -0.9rem !important;
}

/* Heading anchor links */
.prose :is(h1, h2, h3, h4, h5, h6) {
  scroll-margin-top: 80px;
}

.prose .anchor-link {
  opacity: 0;
  margin-left: 0.5rem;
  text-decoration: none;
  color: var(--color-muted-foreground);
  transition: opacity 0.2s;
  vertical-align: baseline;
}

.prose .anchor-hash {
  font-weight: 400;
  margin-right: 0.25rem;
}

.prose .anchor-hash:hover {
  color: var(--color-foreground);
}

.prose .anchor-copy {
  background: none;
  border: none;
  padding: 0;
  margin-left: 0.35rem;
  cursor: pointer;
  color: inherit;
  vertical-align: baseline;
  position: relative;
  top: 0.1em;
}

.prose .anchor-copy:hover {
  color: var(--color-foreground);
}

.prose .anchor-copy.copied svg {
  display: none;
}

.prose .anchor-copy.copied::after {
  content: "Copied!";
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--color-primary);
  position: relative;
  top: -0.15em;
}

.prose :is(h1, h2, h3, h4, h5, h6):hover .anchor-link {
  opacity: 0.4;
}

.prose .anchor-link:hover {
  opacity: 1;
}

/* Category badge dark mode enhancement - use light text for readability */
.dark .category-badge {
  color: #e7e5e4 !important; /* stone-200 */
  background-color: transparent !important;
  border-color: currentColor !important;
  opacity: 0.9;
}

/* Shiki code block line styling */
.shiki-wrapper code {
  display: grid;
  font-size: 0.875rem;
}

.shiki-wrapper .line {
  display: flex;
  width: 100%;
  min-width: max-content;
  padding-left: 1rem;
  padding-right: 1rem;
  transition: background-color 0.15s;
}

.shiki-wrapper .line:hover {
  background-color: #e7e5e4; /* stone-200 */
}

.dark .shiki-wrapper .line:hover {
  background-color: #44403c; /* stone-700 */
}

.shiki-wrapper .line-number {
  display: inline-block;
  width: 2rem;
  min-width: 2rem;
  flex-shrink: 0;
  text-align: right;
  -webkit-user-select: none;
  user-select: none;
  color: #78716c; /* stone-500 */
}

.shiki-wrapper .line-content {
  padding-left: 1.5rem;
}

/* Mermaid content background to match CodeBlock */
.mermaid-content {
  background-color: white;
}

.dark .mermaid-content {
  background-color: #24292e;
}

/* Dark mode: darker border for code blocks and mermaid */
.dark .group.relative.my-4 {
  --tw-ring-color: #333 !important;
}

/* Slide mode: larger typography for presentation */
.slide-content .prose {
  font-size: 1.75rem; /* 28px base */
  line-height: 1.6;
}

@media (min-width: 640px) {
  .slide-content .prose {
    font-size: 2.25rem; /* 36px */
  }
}

@media (min-width: 1024px) {
  .slide-content .prose {
    font-size: 2.5rem; /* 40px */
  }
}

.slide-content h1 {
  font-size: 3rem !important;
  line-height: 1.2 !important;
}

.slide-content h2 {
  font-size: 2.5rem !important;
  line-height: 1.3 !important;
}

.slide-content h3 {
  font-size: 2rem !important;
  line-height: 1.4 !important;
}

@media (min-width: 640px) {
  .slide-content h1 {
    font-size: 4.5rem !important;
  }
  .slide-content h2 {
    font-size: 3.5rem !important;
  }
  .slide-content h3 {
    font-size: 2.5rem !important;
  }
}

@media (min-width: 1024px) {
  .slide-content h1 {
    font-size: 5rem !important;
  }
  .slide-content h2 {
    font-size: 4rem !important;
  }
  .slide-content h3 {
    font-size: 3rem !important;
  }
}

.slide-content .prose ul,
.slide-content .prose ol {
  padding-left: 1.5em;
}

.slide-content .prose li {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.slide-content .prose pre,
.slide-content .prose code {
  font-size: 0.85em;
}

.slide-content .prose p {
  margin-top: 0.75em;
  margin-bottom: 0.75em;
}

/* Slow pulse animation for slide timer runner */
@keyframes pulse-slow {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.4;
  }
}

.animate-pulse-slow {
  animation: pulse-slow 5s ease-in-out infinite;
}

/* Fix: Primary button text color for both light and dark modes */
.bg-primary {
  color: hsl(0 0% 98%); /* White text in light mode */
}

.dark .bg-primary {
  color: hsl(0 0% 9%); /* Dark text in dark mode */
}

.tokyonight .shiki-wrapper .line:hover {
  background-color: #283457;
}

.tokyonight .category-badge {
  color: #c0caf5 !important;
  background-color: transparent !important;
  border-color: currentColor !important;
}

.tokyonight .prose pre {
  background-color: #1a1b26;
}

.tokyonight .mermaid-content {
  background-color: #1a1b26;
}

/* Tokyo Night: Links and interactive elements */
.tokyonight a {
  color: #7aa2f7;
}

.tokyonight a:hover {
  color: #7dcfff;
}

/* Tokyo Night: Headings */
.tokyonight h1,
.tokyonight h2 {
  color: #7aa2f7;
}

.tokyonight h3,
.tokyonight h4,
.tokyonight h5,
.tokyonight h6 {
  color: #bb9af7;
}

/* Tokyo Night: Tag badges with colorful borders */
.tokyonight .tag-badge,
.tokyonight [class*="rounded"][class*="border"][class*="text-xs"],
.tokyonight [class*="rounded"][class*="border"][class*="text-sm"] {
  border-color: #7aa2f7 !important;
  color: #7dcfff !important;
}

.tokyonight .tag-badge:hover,
.tokyonight [class*="rounded"][class*="border"][class*="text-xs"]:hover,
.tokyonight [class*="rounded"][class*="border"][class*="text-sm"]:hover {
  background-color: #283457 !important;
  border-color: #7dcfff !important;
}

/* Tokyo Night: Search result box */
.tokyonight [class*="bg-stone-100"],
.tokyonight [class*="bg-muted"] {
  background-color: #24283b !important;
}

/* Tokyo Night: Card hover effects */
.tokyonight [class*="hover:bg-stone"] {
  transition: background-color 0.2s ease;
}

.tokyonight [class*="hover:bg-stone"]:hover {
  background-color: #24283b !important;
}

/* Tokyo Night: Border colors */
.tokyonight [class*="border-stone"],
.tokyonight [class*="divide-stone"] > * {
  border-color: #283457 !important;
}

/* Tokyo Night: Muted text */
.tokyonight [class*="text-stone-500"],
.tokyonight [class*="text-stone-600"],
.tokyonight [class*="text-muted"] {
  color: #7982a9 !important;
}

/* Tokyo Night: Footer */
.tokyonight footer {
  color: #7982a9;
}

.tokyonight footer a {
  color: #7aa2f7;
}

/* Tokyo Night: Button styles */
.tokyonight .bg-primary {
  background-color: #7aa2f7 !important;
  color: #1a1b26 !important;
}

.tokyonight .bg-primary:hover {
  background-color: #6690e6 !important;
  color: #1a1b26 !important;
}

/* Tokyo Night: Ghost/transparent button hover */
.tokyonight
button:not(.bg-primary):not(.bg-destructive):not(.bg-secondary):hover {
  background-color: #24283b;
}

/* Tokyo Night: Input field styling for better contrast */
.tokyonight input,
.tokyonight textarea,
.tokyonight select {
  background-color: #24283b !important;
  border-color: #3b4261 !important;
  color: #c0caf5 !important;
}

.tokyonight input::placeholder,
.tokyonight textarea::placeholder {
  color: #565f89 !important;
}

/* Tokyo Night: Labels and form text */
.tokyonight label {
  color: #a9b1d6;
}

/* ===== Nord Light Theme Specific Styles ===== */

.nord-light .shiki-wrapper .line:hover {
  background-color: #d8dee9; /* nord4 */
}

.nord-light .category-badge {
  color: #2e3440 !important; /* nord0 */
  background-color: transparent !important;
  border-color: currentColor !important;
}

.nord-light .prose pre {
  background-color: #e5e9f0; /* nord5 */
}

.nord-light .mermaid-content {
  background-color: #e5e9f0; /* nord5 */
}

/* Nord Light: Links and interactive elements */
.nord-light a {
  color: #5e81ac; /* nord10 Blue */
}

.nord-light a:hover {
  color: #81a1c1; /* nord9 */
}

/* Nord Light: Headings */
.nord-light h1,
.nord-light h2 {
  color: #5e81ac; /* nord10 Blue */
}

.nord-light h3,
.nord-light h4,
.nord-light h5,
.nord-light h6 {
  color: #8fbcbb; /* nord7 Frost */
}

/* Nord Light: Tag badges with colorful borders */
.nord-light .tag-badge,
.nord-light [class*="rounded"][class*="border"][class*="text-xs"],
.nord-light [class*="rounded"][class*="border"][class*="text-sm"] {
  border-color: #5e81ac !important; /* nord10 */
  color: #5e81ac !important;
}

.nord-light .tag-badge:hover,
.nord-light [class*="rounded"][class*="border"][class*="text-xs"]:hover,
.nord-light [class*="rounded"][class*="border"][class*="text-sm"]:hover {
  background-color: #d8dee9 !important; /* nord4 */
  border-color: #81a1c1 !important; /* nord9 */
}

/* Nord Light: Search result box */
.nord-light [class*="bg-stone-100"],
.nord-light [class*="bg-muted"] {
  background-color: #e5e9f0 !important; /* nord5 */
}

/* Nord Light: Card hover effects */
.nord-light [class*="hover:bg-stone"] {
  transition: background-color 0.2s ease;
}

.nord-light [class*="hover:bg-stone"]:hover {
  background-color: #d8dee9 !important; /* nord4 */
}

/* Nord Light: Border colors */
.nord-light [class*="border-stone"],
.nord-light [class*="divide-stone"] > * {
  border-color: #d8dee9 !important; /* nord4 */
}

/* Nord Light: Muted text */
.nord-light [class*="text-stone-500"],
.nord-light [class*="text-stone-600"],
.nord-light [class*="text-muted"] {
  color: #4c566a !important; /* nord3 */
}

/* Nord Light: Footer */
.nord-light footer {
  color: #4c566a; /* nord3 */
}

.nord-light footer a {
  color: #5e81ac; /* nord10 */
}

/* Nord Light: Button styles */
.nord-light .bg-primary {
  background-color: #5e81ac !important; /* nord10 */
  color: #eceff4 !important; /* nord6 */
}

.nord-light .bg-primary:hover {
  background-color: #81a1c1 !important; /* nord9 */
  color: #eceff4 !important;
}

/* Nord Light: Ghost/transparent button hover */
.nord-light
button:not(.bg-primary):not(.bg-destructive):not(.bg-secondary):hover {
  background-color: #d8dee9; /* nord4 */
}

/* Nord Light: Input field styling */
.nord-light input,
.nord-light textarea,
.nord-light select {
  background-color: #eceff4 !important; /* nord6 */
  border-color: #d8dee9 !important; /* nord4 */
  color: #2e3440 !important; /* nord0 */
}

.nord-light input::placeholder,
.nord-light textarea::placeholder {
  color: #4c566a !important; /* nord3 */
}

/* Nord Light: Labels and form text */
.nord-light label {
  color: #3b4252; /* nord1 */
}

/* Nord Light: Code block darker border */
.nord-light .group.relative.my-4 {
  --tw-ring-color: #d8dee9 !important; /* nord4 */
}
